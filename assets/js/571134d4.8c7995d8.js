(self.webpackChunkjarbird_docs=self.webpackChunkjarbird_docs||[]).push([[881],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,b=m["".concat(s,".").concat(d)]||m[d]||c[d]||o;return n?r.createElement(b,l(l({ref:t},p),{},{components:n})):r.createElement(b,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8215:function(e,t,n){"use strict";var r=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},1395:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7294),a=n(944),o=n(6010),l="tabItem_1uMI",i="tabItemActive_2DSg";var s=37,u=39;var p=function(e){var t=e.lazy,n=e.block,p=e.defaultValue,c=e.values,m=e.groupId,d=e.className,b=(0,a.Z)(),h=b.tabGroupChoices,f=b.setTabGroupChoices,v=(0,r.useState)(p),g=v[0],y=v[1],k=r.Children.toArray(e.children),C=[];if(null!=m){var j=h[m];null!=j&&j!==g&&c.some((function(e){return e.value===j}))&&y(j)}var w=function(e){var t=e.currentTarget,n=C.indexOf(t),r=c[n].value;y(r),null!=m&&(f(m,r),setTimeout((function(){var e,n,r,a,o,l,s,u;(e=t.getBoundingClientRect(),n=e.top,r=e.left,a=e.bottom,o=e.right,l=window,s=l.innerHeight,u=l.innerWidth,n>=0&&o<=u&&a<=s&&r>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(i),setTimeout((function(){return t.classList.remove(i)}),2e3))}),150))},N=function(e){var t,n;switch(e.keyCode){case u:var r=C.indexOf(e.target)+1;n=C[r]||C[0];break;case s:var a=C.indexOf(e.target)-1;n=C[a]||C[C.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},d)},c.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:g===t?0:-1,"aria-selected":g===t,className:(0,o.Z)("tabs__item",l,{"tabs__item--active":g===t}),key:t,ref:function(e){return C.push(e)},onKeyDown:N,onFocus:w,onClick:w},n)}))),t?(0,r.cloneElement)(k.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))}},9443:function(e,t,n){"use strict";var r=(0,n(7294).createContext)(void 0);t.Z=r},944:function(e,t,n){"use strict";var r=n(7294),a=n(9443);t.Z=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},7164:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return m}});var r=n(2122),a=n(9756),o=(n(7294),n(3905)),l=n(1395),i=n(8215),s={title:"Publish to Maven Central",tags:"tutorial",sidebar_label:"Publish to Maven Central",sidebar_position:4},u={unversionedId:"tutorials/mavencentral",id:"tutorials/mavencentral",isDocsHomePage:!1,title:"Publish to Maven Central",description:"In this tutorial we will go through the process of publishing to Maven Central.",source:"@site/docs/tutorials/mavencentral.mdx",sourceDirName:"tutorials",slug:"/tutorials/mavencentral",permalink:"/jarbird/docs/tutorials/mavencentral",editUrl:"https://github.com/hkhc/jarbird-docs/docs/tutorials/mavencentral.mdx",version:"current",sidebar_label:"Publish to Maven Central",sidebarPosition:4,frontMatter:{title:"Publish to Maven Central",tags:"tutorial",sidebar_label:"Publish to Maven Central",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Simple Library with Signature",permalink:"/jarbird/docs/tutorials/samplelibsign"},next:{title:"Publish to custom Maven repositories",permalink:"/jarbird/docs/tutorials/custommaven"}},p=[{value:"Project setup",id:"project-setup",children:[{value:"gradle.properties",id:"gradleproperties",children:[]},{value:"build.gradle",id:"buildgradle",children:[]},{value:"pom.yaml",id:"pomyaml",children:[]}]}],c={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In this tutorial we will go through the process of publishing to Maven Central."),(0,o.kt)("p",null,"The sample project is ","[here]","(",(0,o.kt)("a",{parentName:"p",href:"https://github."},"https://github."),"\ncom/hkhc/jarbird-samples/tree/master/mavencentral)."),(0,o.kt)("p",null,"We need the following before we can publish component to Maven Central."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"JIRA account for Sonatype OSSRH (OSS Repository Hosting)"),(0,o.kt)("li",{parentName:"ul"},"Claim your namespace on Maven Central repository")),(0,o.kt)("p",null,"Refer to ",(0,o.kt)("a",{parentName:"p",href:"https://central.sonatype.org/publish/publish-guide/#initial-setup"},"official documentation")," of OSSRH to set up the above."),(0,o.kt)("p",null,"If your project is hosted at GitHub, and use ",(0,o.kt)("inlineCode",{parentName:"p"},"io.github.[user]")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"com.github.[user]"),"\nas group name, then you don't need to claim your namespace."),(0,o.kt)("p",null,"Again they are one off things, If you have done that you may go ahead."),(0,o.kt)("h2",{id:"project-setup"},"Project setup"),(0,o.kt)("h3",{id:"gradleproperties"},"gradle.properties"),(0,o.kt)("p",null,"Add the OSSRH account information to ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle.properties"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-properties",metastring:'title="~/.gradle/gradle.properties"',title:'"~/.gradle/gradle.properties"'},"# ...\nrepository.mavencentral.username=your-username\nrepository.mavencentral.password=your-password\nrepository.mavencentral.newUser=false\n# ...\n")),(0,o.kt)("p",null,"Note the ",(0,o.kt)("inlineCode",{parentName:"p"},"newUser")," line. Maven Central use different servers to publish and\nmanage publication depends on whether the account is 'new' account. If the\naccount is registered before Feb 2021, it is 'old' account."),(0,o.kt)("p",null,"Jarbird adjust the URL to publish components according to the ",(0,o.kt)("inlineCode",{parentName:"p"},"newUser")," flag.\nDefault is ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,o.kt)("h3",{id:"buildgradle"},"build.gradle"),(0,o.kt)("p",null,"Tell Jarbird plugin that we want to publish to Maven Central."),(0,o.kt)(l.Z,{defaultValue:"buildgradle-1",values:[{label:"build.gradle",value:"buildgradle-1"},{label:"build.gradle.kts",value:"buildgradlekts"}],mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"buildgradle-1",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"{5}","{5}":!0},"// ...\njarbird {\n    pub {\n        mavenCentral()\n    }\n}\n// ...\n"))),(0,o.kt)(i.Z,{value:"buildgradlekts",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"{5}","{5}":!0},"// ...\njarbird {\n    pub {\n        mavenCentral()\n    }\n}\n// ...\n")))),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"mavenLocal()")," can be omitted if you are not going to publish to Maven Local repository."),(0,o.kt)("h3",{id:"pomyaml"},"pom.yaml"),(0,o.kt)("p",null,"It is required to provide sufficient information about the component before it is\napproved to be published. This information includes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The proper GAV coordinate."),(0,o.kt)("li",{parentName:"ul"},"Description"),(0,o.kt)("li",{parentName:"ul"},"URL that host the source code"),(0,o.kt)("li",{parentName:"ul"},"Developer's information.")),(0,o.kt)("p",null,"Refer to Sonatype ",(0,o.kt)("a",{parentName:"p",href:"https://central.sonatype.org/pages/requirements.html#sufficient-metadata"},"page"),"\nfor detail requirements of POM to publish component to Maven Central."),(0,o.kt)("p",null,"Jarbird get all of those at the ",(0,o.kt)("inlineCode",{parentName:"p"},"pom.yaml")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="pom.yaml"',title:'"pom.yaml"'},"group: jarbirdsamples\nartifactId: mevendemo\nversion: 1.0\npackaging: jar\n\nlicenses:\n  - name: Apache-2.0\n    dist: repo\n\ndevelopers:\n  - id: demo\n    name: Jarbird Demo\n    email: jarbird.demo@fake-email.com\n\nscm:\n  repoType: github.com\n  repoName: demo/jarbird-samples/maven-demo\n\n")),(0,o.kt)("p",null,"See TODO for more details about the content of ",(0,o.kt)("inlineCode",{parentName:"p"},"pom.yaml"),"."),(0,o.kt)("p",null,"Jarbird plugin read the file and create proper POM file for publishing automatically."),(0,o.kt)("p",null,"With this setup, we can see more tasks available with ",(0,o.kt)("inlineCode",{parentName:"p"},"./gradlew tasks")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Jarbird publishing tasks\n------------------------\njbPublish - Publish\njbPublishMavendemo - Publish module 'mavendemo' to all targeted repositories\njbPublishMavendemoToMavenCentral - Publish module 'mavendemo' to Maven Central\njbPublishMavendemoToMavenLocal - Publish module 'mavendemo' to Maven Local repository\njbPublishMavendemoToMavenRepository - Publish module 'mavendemo' to all Maven repositories\njbPublishToMavenCentral - Publish to Maven Central\njbPublishToMavenLocal - Publish to Maven Local repository\njbPublishToMavenRepository - Publish to all Maven repositories\n")),(0,o.kt)("p",null,"The task ",(0,o.kt)("inlineCode",{parentName:"p"},"jbPublish")," publishes component to all specified repositories,\nwhich is MavenLocal and MavenCentral for this sample.\nWe may use ",(0,o.kt)("inlineCode",{parentName:"p"},"jbPublishToMavenCentral"),"  to publish our component to Maven Central\nrepository only."),(0,o.kt)("p",null,"After published the component to Maven Central successfully,\nwe need to release the component manually at OSSRH website."))}m.isMDXComponent=!0},6010:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})}}]);