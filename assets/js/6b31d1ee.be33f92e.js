(self.webpackChunkjarbird_docs=self.webpackChunkjarbird_docs||[]).push([[882],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return d}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),u=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,b=m["".concat(s,".").concat(d)]||m[d]||c[d]||r;return n?i.createElement(b,l(l({ref:t},p),{},{components:n})):i.createElement(b,l({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8215:function(e,t,n){"use strict";var i=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,a=e.className;return i.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},1395:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(7294),a=n(944),r=n(6010),l="tabItem_1uMI",o="tabItemActive_2DSg";var s=37,u=39;var p=function(e){var t=e.lazy,n=e.block,p=e.defaultValue,c=e.values,m=e.groupId,d=e.className,b=(0,a.Z)(),h=b.tabGroupChoices,g=b.setTabGroupChoices,f=(0,i.useState)(p),k=f[0],v=f[1],y=i.Children.toArray(e.children),w=[];if(null!=m){var N=h[m];null!=N&&N!==k&&c.some((function(e){return e.value===N}))&&v(N)}var j=function(e){var t=e.currentTarget,n=w.indexOf(t),i=c[n].value;v(i),null!=m&&(g(m,i),setTimeout((function(){var e,n,i,a,r,l,s,u;(e=t.getBoundingClientRect(),n=e.top,i=e.left,a=e.bottom,r=e.right,l=window,s=l.innerHeight,u=l.innerWidth,n>=0&&r<=u&&a<=s&&i>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(o),setTimeout((function(){return t.classList.remove(o)}),2e3))}),150))},T=function(e){var t,n;switch(e.keyCode){case u:var i=w.indexOf(e.target)+1;n=w[i]||w[0];break;case s:var a=w.indexOf(e.target)-1;n=w[a]||w[w.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},d)},c.map((function(e){var t=e.value,n=e.label;return i.createElement("li",{role:"tab",tabIndex:k===t?0:-1,"aria-selected":k===t,className:(0,r.Z)("tabs__item",l,{"tabs__item--active":k===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:T,onFocus:j,onClick:j},n)}))),t?(0,i.cloneElement)(y.filter((function(e){return e.props.value===k}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},y.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==k})}))))}},9443:function(e,t,n){"use strict";var i=(0,n(7294).createContext)(void 0);t.Z=i},944:function(e,t,n){"use strict";var i=n(7294),a=n(9443);t.Z=function(){var e=(0,i.useContext)(a.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},1744:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return m}});var i=n(2122),a=n(9756),r=(n(7294),n(3905)),l=n(1395),o=n(8215),s={title:"Simple library - A minimal demo",tags:"tutorial",sidebar_label:"Simple library",sidebar_position:2},u={unversionedId:"tutorials/simplelib",id:"tutorials/simplelib",isDocsHomePage:!1,title:"Simple library - A minimal demo",description:"Let's take a look at the simplest sample project.",source:"@site/docs/tutorials/simplelib.mdx",sourceDirName:"tutorials",slug:"/tutorials/simplelib",permalink:"/jarbird/docs/tutorials/simplelib",editUrl:"https://github.com/hkhc/jarbird-docs/docs/tutorials/simplelib.mdx",version:"current",sidebar_label:"Simple library",sidebarPosition:2,frontMatter:{title:"Simple library - A minimal demo",tags:"tutorial",sidebar_label:"Simple library",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Tutorials",permalink:"/jarbird/docs/tutorials/index"},next:{title:"Simple Library with Signature",permalink:"/jarbird/docs/tutorials/samplelibsign"}},p=[{value:"pom.yaml",id:"pomyaml",children:[]},{value:"build.gradle",id:"buildgradle",children:[]},{value:"Run it",id:"run-it",children:[]}],c={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Let's take a look at the simplest sample project."),(0,r.kt)("p",null,"The sample project is ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/hkhc/jarbird-samples/tree/master/simplelib"},"here"),"."),(0,r.kt)("p",null,"It is an absolutely minimal Java library that contains a single Java class\n",(0,r.kt)("inlineCode",{parentName:"p"},"samplelib.Hello")," that do trivial work. In this minimal example we are going to\npublish it to ",(0,r.kt)("strong",{parentName:"p"},"Maven Local repository")," so that other projects in your computer\ncan make use of it. We don't need any remote credential set up for this example.\nBy default, the Maven Local repository is located at ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.m2/repository")," for Unix/macOS\nor ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\{your-username}\\.m2\\repository")," for Windows. We will check our result\nof publishing there. (To keep description simple, I will use Unix style path form\nnow on, please adapt it for Windows environment)."),(0,r.kt)("h2",{id:"pomyaml"},"pom.yaml"),(0,r.kt)("p",null,"First we look at the ",(0,r.kt)("inlineCode",{parentName:"p"},"pom.yaml")," file. It is a Jarbird plugin specific file to\nspecify the information about your component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="pom.yaml"',title:'"pom.yaml"'},"group: jarbirdsamples\nartifactId: simplelib\nversion: 1.0-SNAPSHOT\n")),(0,r.kt)("p",null,"So here is the typical ",(0,r.kt)("a",{parentName:"p",href:"https://maven.apache.org/guides/mini/guide-naming-conventions.html"},"GAV"),"\n(Group, Artifact ID, Version) coordinate of Java component. In the good old days of building\nJava library, we put this information in ",(0,r.kt)("inlineCode",{parentName:"p"},"build.gradle"),". The benefit of taking that out of\n",(0,r.kt)("inlineCode",{parentName:"p"},"build.gradle")," will be obvious when we work on more sophsicated scenarios. It is also OK to\nleave this information in ",(0,r.kt)("inlineCode",{parentName:"p"},"build.gradle"),". We can even omit artifactId, then\nthe project name (usually the project directory name) will be the ",(0,r.kt)("inlineCode",{parentName:"p"},"artifactId"),"."),(0,r.kt)("p",null,"Note that the version of our component is suffix with ",(0,r.kt)("inlineCode",{parentName:"p"},"-SNAPSHOT"),", which\nsignifies that the component is a snapshot component. Snapshot components will\nnot be signed, which save us some effort to make our minimal component works."),(0,r.kt)("h2",{id:"buildgradle"},"build.gradle"),(0,r.kt)("p",null,"The next thing is our familiar ",(0,r.kt)("inlineCode",{parentName:"p"},"build.gradle"),". First we have the plugin declaration at the top of file."),(0,r.kt)(l.Z,{defaultValue:"groovy",values:[{label:"Groovy",value:"groovy"},{label:"Kotlin",value:"kotlin"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"groovy",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy",metastring:'title="build.gradle"',title:'"build.gradle"'},"plugins {\n    id 'java'\n    id 'io.hkhc.jarbird' version '0.5.2'\n}\n// ...\n"))),(0,r.kt)(o.Z,{value:"kotlin",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="build.gradle.kts"',title:'"build.gradle.kts"'},'plugins {\n    id("java")\n    id("io.hkhc.jarbird") version "0.5.2"\n}\n// ...\n')))),(0,r.kt)("p",null,"The Jarbird plugin setups (almost) everything we need to publish components,\nincluding applying plugins, setup publication definition, createing POM file, etc."),(0,r.kt)("p",null,"The last bit we need is to tell Jarbird plugin that we publish our component\nto Maven Local repository."),(0,r.kt)(l.Z,{defaultValue:"groovy-1",values:[{label:"Groovy",value:"groovy-1"},{label:"Kotlin",value:"kotlin-1"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"groovy-1",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy",metastring:'title="build.gradle"',title:'"build.gradle"'},"// ...\njarbird {\n    pub {\n        mavenLocal()\n    }\n}\n// ...\n"))),(0,r.kt)(o.Z,{value:"kotlin-1",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="build.gradle.kts"',title:'"build.gradle.kts"'},"// ...\njarbird {\n    pub {\n        mavenLocal()\n    }\n}\n// ...\n")))),(0,r.kt)("p",null,"All configuration that we tell will be in the ",(0,r.kt)("inlineCode",{parentName:"p"},"jarbird")," extension. This block indicates we have one ",(0,r.kt)("inlineCode",{parentName:"p"},"pub")," (means publication) which will be published to Maven Local repository."),(0,r.kt)("p",null,"That's it!"),(0,r.kt)("h2",{id:"run-it"},"Run it"),(0,r.kt)("p",null,"Let's take a look at the Gradle tasks provided by Jarbird plugin. In your shell which the current directory is the ",(0,r.kt)("inlineCode",{parentName:"p"},"simplelib")," we are working with. We list the available tasks by:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell-session"},"$ ./gradlew tasks\n")),(0,r.kt)("p",null,"We see a section that we may not familiar with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"Jarbird publishing tasks\n------------------------\njbPublish - Publish\njbPublishSimplelib - Publish module 'simplelib' to all targeted repositories\njbPublishSimplelibToMavenLocal - Publish module 'simplelib' to Maven Local repository\njbPublishToMavenLocal - Publish to Maven Local repository\n")),(0,r.kt)("p",null,"All Gradle tasks added by Jarbird plugin are under the group 'Jarbird publishing tasks' and prefixed by 'jb'. So let's publish our component:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell-session"},"$ ./gradlew jbPublish\n\n> Task :jbDokkaHtmlSimplelib\nInitializing plugins\nDokka is performing: documentation for simplelib\nValidity check\nCreating documentation models\n\nWARN: The registry key 'java.correct.class.type.by.place.resolve.scope' accessed, but not loaded yet\n\n> Task :jbDokkaHtmlSimplelib\nTransforming documentation model before merging\nMerging documentation models\nTransforming documentation model after merging\nCreating pages\nTransforming pages\nRendering\n\n\nBUILD SUCCESSFUL in 9s\n9 actionable tasks: 9 executed\n\n")),(0,r.kt)("p",null,"We may ignore the warning at the moment. To check if we have published the component successfully, check the directory ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.m2/repository/jarbirdsamples/simplelib/1.0-SNAPSHOT")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell-session"},"$ ls -1 ~/.m2/repository/jarbirdsamples/simplelib/1.0-SNAPSHOT\nmaven-metadata-local.xml\nsimplelib-1.0-SNAPSHOT-javadoc.jar\nsimplelib-1.0-SNAPSHOT-sources.jar\nsimplelib-1.0-SNAPSHOT.jar\nsimplelib-1.0-SNAPSHOT.module\nsimplelib-1.0-SNAPSHOT.pom\n")),(0,r.kt)("p",null,"So we have the Jar file itself, archive of source code, archive of javadoc, POM file. Everything we need as a Java component in Maven repository are present (except signatures, that we will come to that shortly)."),(0,r.kt)("p",null,"We could use the component in other projects of the same computer, by adding this line to the ",(0,r.kt)("inlineCode",{parentName:"p"},"build.gradle")," of these projects:"),(0,r.kt)(l.Z,{defaultValue:"groovy-2",values:[{label:"Groovy",value:"groovy-2"},{label:"Kotlin",value:"kotlin-2"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"groovy-2",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy",metastring:'title="build.gradle"',title:'"build.gradle"'},"buildscript {\n    mavenLocal()\n    // ... other repositories\n}\ndependencies {\n    implementation 'jarbirdsamples:simplelib:1.0'\n    // ... other dependencies\n}\n"))),(0,r.kt)(o.Z,{value:"kotlin-2",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="build.gradle.kts"',title:'"build.gradle.kts"'},'buildscript {\n    mavenLocal()\n    // ... other repositories\n}\ndependencies {\n    implementation("jarbirdsamples:simplelib:1.0")\n    // ... other dependencies\n}\n')))),(0,r.kt)("p",null,"So we have completed our first trial of Jarbird plugin."))}m.isMDXComponent=!0},6010:function(e,t,n){"use strict";function i(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})}}]);