<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<title data-react-helmet="true">pub the Publication | Jarbird Gradle Plugin</title><meta data-react-helmet="true" property="og:url" content="https://hkhc.github.io/jarbird/docs/reference/pub"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="pub the Publication | Jarbird Gradle Plugin"><meta data-react-helmet="true" name="description" content="In terms of the Jarbird plugin, &quot;pub&quot; refers to a unit of publication. It usually means publishing a JAR artefact together with related items like source code archive, javadoc archive, POM file, and their signatures. For Gradle plugin publishing, a pub also involves publishing a pseudo component that contains the plugin ID."><meta data-react-helmet="true" property="og:description" content="In terms of the Jarbird plugin, &quot;pub&quot; refers to a unit of publication. It usually means publishing a JAR artefact together with related items like source code archive, javadoc archive, POM file, and their signatures. For Gradle plugin publishing, a pub also involves publishing a pseudo component that contains the plugin ID."><link data-react-helmet="true" rel="shortcut icon" href="/jarbird/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://hkhc.github.io/jarbird/docs/reference/pub"><link data-react-helmet="true" rel="alternate" href="https://hkhc.github.io/jarbird/docs/reference/pub" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hkhc.github.io/jarbird/docs/reference/pub" hreflang="x-default"><link rel="stylesheet" href="/jarbird/assets/css/styles.db6bd782.css">
<link rel="preload" href="/jarbird/assets/js/runtime~main.a9135983.js" as="script">
<link rel="preload" href="/jarbird/assets/js/main.5ce00244.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/jarbird/"><img src="/jarbird/img/logo.png" alt="Jarbird Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/jarbird/img/logo.png" alt="Jarbird Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Jarbird</b></a><a class="navbar__item navbar__link" href="/jarbird/docs/intro">Introduction</a><a class="navbar__item navbar__link" href="/jarbird/docs/tutorials/index">Tutorial</a><a class="navbar__item navbar__link navbar__link--active" href="/jarbird/docs/reference/index">Reference</a><a class="navbar__item navbar__link" href="/jarbird/docs/create-account">Create Accounts</a><a class="navbar__item navbar__link" href="/jarbird/docs/build">Build</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hkhc/jarbird" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/jarbird/"><img src="/jarbird/img/logo.png" alt="Jarbird Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/jarbird/img/logo.png" alt="Jarbird Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Jarbird</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/tutorials/index">Tutorial</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/jarbird/docs/reference/index">Reference</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/create-account">Create Accounts</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/build">Build</a></li><li class="menu__list-item"><a href="https://github.com/hkhc/jarbird" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/index">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/declare-plugin">Declaring plugin</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/concepts">Core Concepts</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/pom">POM</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/pom-reference">pom.yaml Reference</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/jarbird/docs/reference/pub">pub the Publication</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/properties-ref">Properties Reference</a></li><li class="menu__list-item"><a class="menu__link" href="/jarbird/docs/reference/limitations">Limitations</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">pub the Publication</h1></header><p>In terms of the Jarbird plugin, &quot;pub&quot; refers to a unit of publication. It usually means publishing a JAR artefact together with related items like source code archive, javadoc archive, POM file, and their signatures. For Gradle plugin publishing, a pub also involves publishing a pseudo component that contains the plugin ID.</p><p>A pub also describes the remote repositories it targets. One pub maybe published to one or multiple, heterogenous types of remote repositories.</p><p>In build script, we declare a pub in the <code>jarbird</code> block:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>This tells the Jarbird plugin that we are going to publish the artefacts built by this project. It will also set up the tasks for archiving source code, generating javadoc and archive it, and signing all of them. It generates tasks to publish all of these to Maven local repository.</p><p>So we can run the plugin task by</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew jbPUblishToMavneLocal</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>or simply</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew jbPublish</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>which publishes everything to everywhere declared.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pub-with-variant"></a>pub with variant<a class="hash-link" href="#pub-with-variant" title="Direct link to heading">#</a></h2><p>In case there are multiple variants of POM information in pom.yaml, we link the pub with pom.yaml by providing a variant name. For example, in an Android project we have <code>pom.yaml</code> like this:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">pom.yaml</div><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">variant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> debug</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifactId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> simpleaar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">staging</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">variant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> release</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifactId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> simpleaar</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">production</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jarbirdsamples</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">packaging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> aar</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ....</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then we may declare the <code>pub</code>s like this:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can be &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach { variant -&gt; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        pub(variant.name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(variant)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can be &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        pub(name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(this@configureEach)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Then the Jarbird plugin knows the association of a particular <code>pub</code> and a variant of POM.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="repositories"></a>Repositories<a class="hash-link" href="#repositories" title="Direct link to heading">#</a></h2><p>We can define one or more repositories for each pub. Each of them is in the form of a function call.</p><table><thead><tr><th align="left">Repository</th><th align="left">Meaning</th></tr></thead><tbody><tr><td align="left"><code>mavenLocal()</code></td><td align="left">Maven local repository. It is included implicitly, so we don&#x27;t need to specify this explicitly.</td></tr><tr><td align="left"><a href="/jarbird/docs/reference/properties-ref#mavencentral"><code>mavenCentral()</code></a></td><td align="left">Maven Central</td></tr><tr><td align="left"><a href="/jarbird/docs/reference/properties-ref#custommaven"><code>mavenRepo(repo)</code></a></td><td align="left">Custom Maven repository. <code>repo</code> is a string that represents the repository. It is used to match the setting of the repository in <code>gradle.properties</code></td></tr><tr><td align="left"><a href="/jarbird/docs/reference/properties-ref#gradleportal"><code>gradlePortal()</code></a></td><td align="left">Gradle Plugin Portal</td></tr><tr><td align="left"><a href="/jarbird/docs/reference/properties-ref#artifactory"><code>artifactory(repo)</code></a></td><td align="left">Artifactory repository.<code>repo</code> is a string that representation the repository. It is used to match the setting of a repository in <code>gradle.properties</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extension-level-setting-pub-level-setting"></a>Extension level setting, pub level setting<a class="hash-link" href="#extension-level-setting-pub-level-setting" title="Direct link to heading">#</a></h2><p>We may customize how a pub is published by adding directives to the <code>pub</code> block or <code>jarbird</code> block. <code>pub</code> inherit all directives declared in the <code>jarbird</code> extension block of the same project and the parent projects.</p><p>For example,</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>declare a repository for the pub. On the other hand, the declation :</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sourceSetNames(&quot;main&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sourceSetNames(&quot;qa&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sourceSetNames(&quot;main&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sourceSetNames(&quot;qa&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>make <code>mavenCentral()</code> available to both <code>pub</code> in the extension block.</p><p>We can even put the directives at the root project so that all sub-projects inherit them.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that <code>pub</code>s themselves are not inherited. The pub declared in root project is not available in sub-projects.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="signing"></a>Signing <a href="#signing"></a><a class="hash-link" href="#signing" title="Direct link to heading">#</a></h2><p>By default, the Jarbird plugin attempts to set up artefact signing for each pub. However, no signing is performed for a pub with a version suffixed by `-SNAPSHOT&#x27;.</p><p>We can disable signing explicitly by using <code>doNotSign()</code> in pub or jarbird block.</p><p>Signing needs a key pair. The key pair is generated by GnuPG. Two formats of key stores of GnuPG are available.</p><ul><li>GnuPG version 2.1 or before use keyring format.</li><li>GnuPG version 2.2 or after use key box format.</li></ul><p>They need different <a href="/jarbird/docs/reference/properties-ref#artifactsigning">settings</a> in <code>gradle.properties</code>.</p><p>We can specify which key format to use by using the following directives:</p><ul><li><code>signWithKeybox()</code> : use keybox to access key pair</li><li><code>signWithKeyring()</code> : use keyring to access key pair</li></ul><p>If we specify one type of key store, and the Jarbird plugin detects that only another type of key store setting is available in <code>gradle.properties</code>, a warning will be shown, and the key store type will be determined by the
<a href="/jarbird/docs/reference/properties-ref#artifactsigning">settings</a> in <code>gradle.properties</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="source-set-specification"></a>Source set specification<a class="hash-link" href="#source-set-specification" title="Direct link to heading">#</a></h2><p>Normally, Jarbird determines automatically the code to be built as a library. It also tries to figure out the source code directory to build documentation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="jar-project"></a>JAR project<a class="hash-link" href="#jar-project" title="Direct link to heading">#</a></h3><p>Normally we don&#x27;t need to do anything special in <code>pub {}</code> declaration. Jarbird plugin will look for <code>project.component[&quot;java&quot;]</code> for artifacts built and use the <code>JavaPluginConvention</code> class to determine the source sets for documentation.</p><p>We may provide alternate component by</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(components.custom)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(components[&quot;custom&quot;])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>See <a href="#androidaar">Android</a> section for more details on using <code>components</code>with Android project.</p><p>In case we want to publish two components in single project, we may also specify code to publish by <code>SourceSet</code>:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sourceSet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // implicitly the new source set will be at src/altSourceSet1 directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    altSourceSet1 { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // implicitly the new source set will be at src/altSourceSet2 directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    altSourceSet2 { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;pub1&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(project.sourceSets.altSourceSet1) // link to sourceSet        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;pub2&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(project.sourceSets.altSourceSet2) // link to sourceSet        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">root project build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sourceSet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // implicitly the new source set will be at src/altSourceSet1 directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    create(&quot;altSourceSet1&quot;) { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // implicitly the new source set will be at src/altSourceSet2 directory</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    create(&quot;altSourceSet2&quot;) { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;pub1&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(project.sourceSets[&quot;altSourceSet1&quot;])        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;pub2&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(project.sourceSets[&quot;altSourceSet2&quot;])        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Library compilation and document generation will be based on the source set specified in the <code>pub</code> block.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="android-aar-project"></a>Android AAR project<a href="#androidaar"></a><a class="hash-link" href="#android-aar-project" title="Direct link to heading">#</a></h3><p>Android AAR projects come with variants. We have a component instance for each of the variant of the Android project. So the following declaration can succeed.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can typically be &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach { variant -&gt; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        pub(variant.name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(components[variant])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can be typically &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">        pub(name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(components[name])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>However, the source set of Android project is resolved in a different way than the usual JAR project. So it will fail to generate proper documentation.</p><p>The proper way to declare <code>pub</code> for an Android project is to use the <code>jarbird-android</code> plugin and provide a <code>LibraryVariant</code> instance to <code>from()</code> method</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle</div><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">plugin {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    id &#x27;io.hkhc.jarbird-android&#x27; version &#x27;0.7.0&#x27; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can be &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach { variant -&gt; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pub(variant.name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(variant)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">build.gradle.kts</div><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">plugin {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    id(&quot;io.hkhc.jarbird-android&quot;) version &quot;0.7.0&quot;    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// variant.name can be &quot;debug&quot; or &quot;release&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">android.libraryVariants.configureEach {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pub(name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from(this@configureEach)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Then source set can be resolved correctly. It works even when our build type/flavour combination of Android project uses multiple source folders to build the project.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gradle-plugin-project"></a>Gradle plugin project<a class="hash-link" href="#gradle-plugin-project" title="Direct link to heading">#</a></h3><p>There is no special syntax for <code>pub</code> syntax to publish the Gradle plugin. We can publish multiple Gradle plugins in one project, each of them is specified in a <code>pub</code> block, linked to different variants of <code>pom.yaml</code>.</p><p>However, there is one limitation. We can have only one set of meta-information like website, scm information, etc. If there are multiple <code>pub</code>s for Gradle plugin publishing, these pieces of information are picked from the first <code>pub</code> for Gradle plugin publishing. This limitation does not apply to normal JAR projects.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="variant-augmented-coordinate"></a>Variant augmented coordinate<a class="hash-link" href="#variant-augmented-coordinate" title="Direct link to heading">#</a></h2><p>When we publish multiple <code>pub</code>s in one project, the GAV coordinate of components build with these <code>pub</code>s can be blended with the variant, so that we can publish distinguish components to repositories. There are three ways we combine the GAV as specified in <code>pom.yaml</code> with the variant.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="variant-with-version"></a>Variant with version<a class="hash-link" href="#variant-with-version" title="Direct link to heading">#</a></h3><p>Consider the jarbird declaration and POM in a project:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">pom.yaml</div><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mygroup</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifactId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mylib</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As a result, we publish two components with coordinates:</p><ul><li><code>mygroup:mylib:1.0-qa</code></li><li><code>mygroup:mylib:1.0-release</code></li></ul><p>This is the default behaviour. If we prefer it to be stated explicitly, we add <code>variantWithVersion()</code> :</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantWithVersion()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantWithVersion()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Just like the repositories declaration, it can be in <code>pub</code> block, <code>jarbird</code> block in current project or parent project. and <code>pub</code> get inherited settings from <code>jarbird</code> blocks of the current project and all ancestor projects.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="variant-with-artefact-id"></a>Variant with artefact ID<a class="hash-link" href="#variant-with-artefact-id" title="Direct link to heading">#</a></h3><p>Suffixing version with variant may not be the best option for some situations. We may opt to combine variant with artifact ID :</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantWithArtifactID()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantWithArtifactID()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Then the components to be published become:</p><ul><li><code>mygroup:mylib-qa:1.0</code></li><li><code>mygroup:mylib-release:1.0</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make-variant-invisible-and-gain-full-control-of-coordinates"></a>Make variant invisible and gain full control of coordinates<a class="hash-link" href="#make-variant-invisible-and-gain-full-control-of-coordinates" title="Direct link to heading">#</a></h3><p>When automatic blending of coordinates are too restrictive and we want to take back full control of it. We may make the variant invisible in coordinates:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantInvisible()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    variantInvisible()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;qa&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.qa)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(&quot;release&quot;) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        from(sourceSets.main)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">pom.yaml</div><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar codeBlockWithTitle_2JqI" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">variant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> qa</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mygroup.qa</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifactId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mylib.qa</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">variant</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> main</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mygroup.release</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifactId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mylib.release</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We use <code>variantInvisible()</code> to disable the automatic blending variant to coordinates. Then we have multiple fragments of <code>pom.yaml</code> to specify the coordinates for each of the variants. Then the result becomes:</p><ul><li><code>mygroup.qa:mylib.qa:1.0</code></li><li><code>mygroup.release:mylib.release:1.0</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dokka-configuration"></a>Dokka configuration<a class="hash-link" href="#dokka-configuration" title="Direct link to heading">#</a></h2><p>The Jarbird plugin configures the Dokka documentation engine to get proper source code and classpath based on the <code>jarbird</code> block configuration. But sometimes we still want to perform customisation to the Dokka configuration like the title, layout, links to external documentation pages, etc.</p><p>We may inject the Dokka configuration in <code>jarbird</code> block. For example, to add hyperlink to the references of the Java standard library :</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">build.gradle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">build.gradle.kts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    dokkaConfig {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        dokkaSourceSets.forEach {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            it.externalDocumentationLink(&quot;https://docs.gradle.org/current/javadoc/&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jarbird {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    dokkaConfig {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        dokkaSourceSets.forEach {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            it.externalDocumentationLink(&quot;https://docs.gradle.org/current/javadoc/&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>The <code>dokkaConfig</code> block provides a reference to <code>DokkaTask</code>. It has been configured with proper <code>dokkaSourceSets</code> block with <code>classpath</code> and <code>sourceRoot</code> arguments. we can do further customisation in the <code>dokkaConfig</code> block.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/hkhc/jarbird-docs/docs/reference/pub.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/jarbird/docs/reference/pom-reference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« pom.yaml Reference</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/jarbird/docs/reference/properties-ref"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Properties Reference Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pub-with-variant" class="table-of-contents__link">pub with variant</a></li><li><a href="#repositories" class="table-of-contents__link">Repositories</a></li><li><a href="#extension-level-setting-pub-level-setting" class="table-of-contents__link">Extension level setting, pub level setting</a></li><li><a href="#signing" class="table-of-contents__link">Signing <a href="#signing"></a></a></li><li><a href="#source-set-specification" class="table-of-contents__link">Source set specification</a><ul><li><a href="#jar-project" class="table-of-contents__link">JAR project</a></li><li><a href="#android-aar-project" class="table-of-contents__link">Android AAR project<a href="#androidaar"></a></a></li><li><a href="#gradle-plugin-project" class="table-of-contents__link">Gradle plugin project</a></li></ul></li><li><a href="#variant-augmented-coordinate" class="table-of-contents__link">Variant augmented coordinate</a><ul><li><a href="#variant-with-version" class="table-of-contents__link">Variant with version</a></li><li><a href="#variant-with-artefact-id" class="table-of-contents__link">Variant with artefact ID</a></li><li><a href="#make-variant-invisible-and-gain-full-control-of-coordinates" class="table-of-contents__link">Make variant invisible and gain full control of coordinates</a></li></ul></li><li><a href="#dokka-configuration" class="table-of-contents__link">Dokka configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/jarbird/docs/tutorials/index">Tutorial</a></li><li class="footer__item"><a href="https://github.com/hkhc/jarbird-samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sample Code</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://hkhc.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">HKHC</a></li><li class="footer__item"><a href="https://github.com/hkhc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 HKHC. Built with Docusaurus.</div></div></div></footer></div>
<script src="/jarbird/assets/js/runtime~main.a9135983.js"></script>
<script src="/jarbird/assets/js/main.5ce00244.js"></script>
</body>
</html>